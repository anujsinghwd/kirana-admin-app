import{u as B,r,m as G,j as e,n as T,o as c,p as q,L as Q,q as S,s as F,t as I,v as J,M as O,w as H}from"./index-azSrRxXg.js";const V=()=>{const{loadingConfig:b,categories:o,fetchCategories:E,createCategory:D,updateCategory:L,deleteCategory:f,deleteCategoryImage:U}=B(),[p,i]=r.useState(!1),[a,y]=r.useState(null),[m,x]=r.useState(""),[j,g]=r.useState(""),[N,n]=r.useState(null),[v,u]=r.useState(null),[l,_]=r.useState("");G(p),r.useEffect(()=>{E().catch(console.error)},[]);const M=()=>{d(),i(!0)},d=()=>{y(null),x(""),g(""),u(null),n(null)},w=s=>{y(s),x(s.name),g(s.description||""),n(s?.image||""),i(!0)},P=async s=>{try{a?await L(a._id,s):await D(s),i(!1),d()}catch(t){d(),alert(t.response?.data?.message||t.message)}},R=s=>{const t=s.target.files;if(!t||t.length===0)return;const h=t[0];h&&(u(h),n(URL.createObjectURL(h)))},z=s=>{s.preventDefault();const t=new FormData;t.append("name",m),t.append("description",j),v&&t.append("image",v),P(t)},A=async()=>{if(a?._id&&a?.image){const s={id:a._id,image:a.image};await U(s)}n(null),u(null)},C=()=>{i(!1),d()},k=r.useMemo(()=>l.trim()?o.filter(s=>s.name.toLowerCase().includes(l.toLowerCase())||s.description?.toLowerCase().includes(l.toLowerCase())):o,[o,l]);return e.jsxs("div",{className:"p-4 md:p-6 bg-gray-50 min-h-screen",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:"Categories"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage your product categories"})]}),e.jsxs("button",{onClick:M,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-5 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-all shadow-sm",children:[e.jsx(T,{})," Add Category"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-100 flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(c,{className:"text-blue-600 text-xl"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.length}),e.jsx("p",{className:"text-sm text-gray-500",children:"Total Categories"})]})]}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(q,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search categories...",value:l,onChange:s=>_(s.target.value),className:"w-full pl-11 pr-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white shadow-sm"})]})]})]}),b.loading&&e.jsx(Q,{size:40,color:"fill-blue-500",fullscreen:!0,text:b.text}),k.length===0?e.jsxs("div",{className:"bg-white rounded-xl p-12 text-center border-2 border-dashed border-gray-300",children:[e.jsx(c,{className:"text-6xl text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 font-medium text-lg",children:l?"No categories found":"No categories yet"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:l?"Try a different search term":'Click "Add Category" to create your first category'})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:k.map(s=>e.jsxs("div",{className:"bg-white border border-gray-100 rounded-xl shadow-sm hover:shadow-lg transition-all duration-200 overflow-hidden group",children:[e.jsxs("div",{className:"relative h-48 bg-gray-100 overflow-hidden",children:[s?.image?e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}):e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-gray-400",children:[e.jsx(S,{className:"text-4xl mb-2"}),e.jsx("span",{className:"text-sm",children:"No Image"})]}),e.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center gap-3",children:[e.jsx("button",{onClick:()=>w(s),className:"p-3 bg-white hover:bg-blue-50 rounded-lg transition-colors",title:"Edit category",children:e.jsx(F,{className:"text-blue-600"})}),e.jsx("button",{onClick:()=>f(s._id),className:"p-3 bg-white hover:bg-red-50 rounded-lg transition-colors",title:"Delete category",children:e.jsx(I,{className:"text-red-600"})})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-bold text-gray-900 text-lg mb-1 truncate",children:s.name}),e.jsx("p",{className:"text-sm text-gray-500 line-clamp-2 min-h-[40px]",children:s.description||"No description"}),e.jsxs("div",{className:"flex gap-2 mt-4 sm:hidden",children:[e.jsxs("button",{onClick:()=>w(s),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg text-sm font-medium transition-colors",children:[e.jsx(F,{})," Edit"]}),e.jsxs("button",{onClick:()=>f(s._id),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-red-50 hover:bg-red-100 text-red-700 rounded-lg text-sm font-medium transition-colors",children:[e.jsx(I,{})," Delete"]})]})]})]},s._id))}),p&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-0 md:p-4",children:e.jsxs("form",{onSubmit:z,className:"bg-white w-full h-full md:h-auto md:max-h-[90vh] md:max-w-2xl rounded-none md:rounded-xl shadow-2xl flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center z-10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center",children:e.jsx(c,{className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-lg text-gray-900",children:a?"Edit Category":"Add Category"}),e.jsx("p",{className:"text-gray-500 text-sm",children:a?"Update category details":"Create a new category"})]})]}),e.jsx("button",{type:"button",onClick:C,className:"w-8 h-8 hover:bg-gray-100 rounded-lg flex items-center justify-center transition-colors text-gray-600 hover:text-gray-900",children:"âœ•"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6 bg-gray-50",children:[e.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(J,{className:"text-blue-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Basic Information"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Category Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{required:!0,value:m,onChange:s=>x(s.target.value),placeholder:"e.g., Groceries, Electronics",className:"w-full border border-gray-300 rounded-lg px-4 py-2.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:j,onChange:s=>g(s.target.value),placeholder:"Describe this category...",rows:3,className:"w-full border border-gray-300 rounded-lg px-4 py-2.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(S,{className:"text-green-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Category Image"})]}),e.jsx("div",{className:"flex flex-col items-center justify-center border-2 border-dashed border-gray-300 rounded-lg p-6 bg-gray-50",children:N?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:N,alt:"Preview",className:"w-48 h-48 object-cover rounded-lg border-2 border-gray-200"}),e.jsx("button",{type:"button",onClick:A,className:"absolute -top-2 -right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-2 shadow-lg transition-colors",children:e.jsx(O,{className:"text-lg"})})]}):e.jsxs("label",{className:"flex flex-col items-center cursor-pointer group",children:[e.jsx("div",{className:"w-20 h-20 bg-blue-100 group-hover:bg-blue-200 rounded-full flex items-center justify-center mb-3 transition-colors",children:e.jsx(H,{className:"text-3xl text-blue-600"})}),e.jsx("span",{className:"text-sm font-medium text-gray-700 mb-1",children:"Upload Image"}),e.jsx("span",{className:"text-xs text-gray-500",children:"PNG, JPG up to 5MB"}),e.jsx("input",{type:"file",accept:"image/*",onChange:R,className:"hidden"})]})})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-white border-t px-6 py-4 flex justify-end gap-3 shadow-lg",children:[e.jsx("button",{type:"button",onClick:C,className:"px-6 py-2.5 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:!m.trim(),className:"px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-sm flex items-center gap-2",children:[e.jsx(c,{}),a?"Update Category":"Create Category"]})]})]})})]})};export{V as default};
