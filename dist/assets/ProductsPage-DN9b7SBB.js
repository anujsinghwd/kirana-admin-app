import{r as m,j as e,c as v,w as G,x as $,t as z,y as H,A as W,i as J,k as D,q as M,s as V,B as Y,C as R,p as K,D as Z,m as T,E as X,G as ee,u as se,o as te,H as q,I as re,J as ae}from"./index-vANiC36P.js";const le=({maxCount:r=3,defaultImages:b=[],onChange:y})=>{const[f,n]=m.useState(null),[x,s]=m.useState(b),i=h=>{const u=h.target.files?.[0];if(!u)return;if(x.length>=r){alert(`You can upload a maximum of ${r} images.`);return}const g=new DataTransfer;f&&Array.from(f).forEach(a=>g.items.add(a)),g.items.add(u),n(g.files),s(a=>[...a,URL.createObjectURL(u)])},d=h=>{if(!f&&b.length===0){s(a=>a.filter((c,j)=>j!==h));return}const u=x.filter((a,c)=>c!==h),g=new DataTransfer;if(f){const a=Array.from(f);a.splice(h,1),a.forEach(c=>g.items.add(c))}n(g.files.length>0?g.files:null),s(u)};m.useEffect(()=>{y(f,x)},[f,x]);const o=x.length>=r;return e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Upload Images"}),x.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:x.map((h,u)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:h,alt:`preview-${u}`,className:"w-24 h-24 object-cover border border-gray-200 rounded-md shadow-sm"}),e.jsx("button",{type:"button",onClick:()=>d(u),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-5 h-5 text-xs flex items-center justify-center opacity-90 hover:opacity-100 transition",children:"âœ•"})]},u))}),e.jsxs("div",{className:"flex gap-3 flex-wrap",children:[e.jsxs("label",{className:`flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded cursor-pointer text-sm ${o?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx(ne,{}),"Take Photo",e.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:i,className:"hidden",disabled:o})]}),e.jsxs("label",{className:`flex items-center justify-center gap-2 px-4 py-2 border border-blue-600 text-blue-600 rounded cursor-pointer text-sm hover:bg-blue-50 ${o?"opacity-50 cursor-not-allowed":""}`,children:[e.jsx(oe,{}),"Add Photo",e.jsx("input",{type:"file",accept:"image/*",onChange:i,className:"hidden",disabled:o})]})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["You can upload up to ",e.jsx("strong",{children:r})," images."]})]})},ne=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.8,stroke:"currentColor",className:"w-4 h-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11.25v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})}),oe=()=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.8,stroke:"currentColor",className:"w-4 h-4",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),ie=({open:r,onClose:b,onSave:y,initialData:f})=>{const[n,x]=m.useState({unitValue:0,unitType:"gm",price:0,offerPrice:0,discount:0,stock:0,sku:"",shelfLife:{duration:0,unit:"months",manufacturingDate:"",expiryDate:"",bestBefore:""}});m.useEffect(()=>{f&&x(f)},[f]);const s=(a,c)=>{typeof c=="number"&&c<0&&(c=0),x({...n,[a]:c})},i=(a,c)=>{typeof c=="number"&&c<0&&(c=0),x({...n,shelfLife:{...n.shelfLife,[a]:c}})},d=n.offerPrice&&n.offerPrice<n.price,o=d?n.price-(n.offerPrice||0):0,h=d?Math.round(o/n.price*100):0,g=(()=>{const a=n.stock??0;return a===0?{label:"Out of Stock",color:"text-red-600",bgColor:"bg-red-50"}:a<=9?{label:"Low Stock",color:"text-orange-600",bgColor:"bg-orange-50"}:a<=20?{label:"Medium Stock",color:"text-yellow-600",bgColor:"bg-yellow-50"}:{label:"Good Stock",color:"text-green-600",bgColor:"bg-green-50"}})();return r?e.jsx("div",{className:"fixed inset-0 bg-black/50 z-[60] flex items-center justify-center p-0 md:p-4",children:e.jsxs("div",{className:"bg-white rounded-none md:rounded-xl shadow-2xl w-full h-full md:h-auto md:max-w-3xl md:max-h-[90vh] overflow-y-auto flex flex-col",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center z-10 rounded-t-none md:rounded-t-xl",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center",children:e.jsx(v,{className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-lg text-gray-900",children:f?"Edit Variant":"Add New Variant"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Configure product variant details"})]})]}),e.jsx("button",{onClick:b,className:"w-8 h-8 hover:bg-gray-100 rounded-lg flex items-center justify-center transition-colors text-gray-600 hover:text-gray-900",children:"Ã—"})]}),e.jsxs("div",{className:"p-6 flex-1 space-y-6",children:[e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(G,{className:"text-blue-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Unit & Pricing"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Unit Value ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",min:"0",step:"0.01",required:!0,placeholder:"e.g., 500",value:n.unitValue||"",onChange:a=>s("unitValue",Number(a.target.value)),className:"border border-gray-300 rounded-lg px-4 py-2.5 text-sm w-full focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Unit Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:n.unitType,onChange:a=>s("unitType",a.target.value),className:"border border-gray-300 rounded-lg px-4 py-2.5 text-sm w-full focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"gm",children:"Gram (gm)"}),e.jsx("option",{value:"kg",children:"Kilogram (kg)"}),e.jsx("option",{value:"ml",children:"Millilitre (ml)"}),e.jsx("option",{value:"ltr",children:"Litre (ltr)"}),e.jsx("option",{value:"piece",children:"Piece"}),e.jsx("option",{value:"packet",children:"Packet"}),e.jsx("option",{value:"box",children:"Box"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Regular Price (â‚¹) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx($,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"number",min:"0",step:"0.01",required:!0,placeholder:"0.00",value:n.price||"",onChange:a=>s("price",Number(a.target.value)),className:"border border-gray-300 rounded-lg pl-10 pr-4 py-2.5 text-sm w-full focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Offer Price (â‚¹)"}),e.jsxs("div",{className:"relative",children:[e.jsx($,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-500"}),e.jsx("input",{type:"number",min:"0",step:"0.01",placeholder:"0.00",value:n.offerPrice||"",onChange:a=>s("offerPrice",Number(a.target.value)),className:"border border-gray-300 rounded-lg pl-10 pr-4 py-2.5 text-sm w-full focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),d&&e.jsxs("p",{className:"text-xs text-green-600 mt-1 flex items-center gap-1",children:[e.jsx(z,{}),"Customers save â‚¹",o.toFixed(2)," (",h,"%)"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Discount (%)"}),e.jsxs("div",{className:"relative",children:[e.jsx(H,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"number",min:"0",max:"100",placeholder:"0",value:n.discount||"",onChange:a=>s("discount",Number(a.target.value)),className:"border border-gray-300 rounded-lg pl-10 pr-4 py-2.5 text-sm w-full focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SKU Code"}),e.jsxs("div",{className:"relative",children:[e.jsx(W,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"e.g., RICE-500GM-001",value:n.sku||"",onChange:a=>s("sku",a.target.value),className:"border border-gray-300 rounded-lg pl-10 pr-4 py-2.5 text-sm w-full focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(v,{className:"text-purple-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Stock Management"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Stock Quantity ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",min:"0",required:!0,placeholder:"0",value:n.stock||"",onChange:a=>s("stock",Number(a.target.value)),className:"border border-gray-300 rounded-lg px-4 py-2.5 text-sm w-full focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("div",{className:`mt-2 px-3 py-2 rounded-lg ${g.bgColor}`,children:e.jsxs("p",{className:`text-sm font-medium ${g.color}`,children:["Status: ",g.label]})})]})]}),e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(J,{className:"text-orange-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Shelf Life & Expiry"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration"}),e.jsx("input",{type:"number",min:"0",placeholder:"12",value:n.shelfLife?.duration||"",onChange:a=>i("duration",Number(a.target.value)),className:"border border-gray-300 rounded-lg px-4 py-2.5 text-sm w-full focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit"}),e.jsxs("select",{value:n.shelfLife?.unit||"months",onChange:a=>i("unit",a.target.value),className:"border border-gray-300 rounded-lg px-4 py-2.5 text-sm w-full focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"days",children:"Days"}),e.jsx("option",{value:"months",children:"Months"}),e.jsx("option",{value:"years",children:"Years"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Manufacturing Date"}),e.jsx("input",{type:"date",value:n.shelfLife?.manufacturingDate||"",onChange:a=>i("manufacturingDate",a.target.value),className:"border border-gray-300 rounded-lg px-4 py-2.5 text-sm w-full focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiry Date"}),e.jsx("input",{type:"date",value:n.shelfLife?.expiryDate||"",onChange:a=>i("expiryDate",a.target.value),className:"border border-gray-300 rounded-lg px-4 py-2.5 text-sm w-full focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Best Before"}),e.jsx("input",{type:"text",placeholder:"e.g., Best before 6 months from MFD",value:n.shelfLife?.bestBefore||"",onChange:a=>i("bestBefore",a.target.value),className:"border border-gray-300 rounded-lg px-4 py-2.5 text-sm w-full focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),e.jsxs("div",{className:"sticky bottom-0 bg-white border-t px-6 py-4 flex justify-end gap-3 rounded-b-xl shadow-lg",children:[e.jsx("button",{onClick:b,className:"px-6 py-2.5 border border-gray-300 text-gray-700 bg-white hover:bg-gray-50 rounded-lg font-medium transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:()=>{y(n),b()},disabled:!n.unitValue||!n.price,className:"px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-sm flex items-center gap-2",children:[e.jsx(v,{}),"Save Variant"]})]})]})}):null},de=({variants:r,onEdit:b,onDelete:y})=>{if(r.length===0)return e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[e.jsx(v,{className:"text-4xl text-gray-300 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 font-medium",children:"No variants added yet"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:'Click "Add Variant" to create your first variant'})]});const f=s=>s===0?{label:"Out of Stock",color:"bg-red-100 text-red-700",dotColor:"bg-red-500"}:s<=9?{label:"Low Stock",color:"bg-orange-100 text-orange-700",dotColor:"bg-orange-500"}:s<=20?{label:"Medium",color:"bg-yellow-100 text-yellow-700",dotColor:"bg-yellow-500"}:{label:"In Stock",color:"bg-green-100 text-green-700",dotColor:"bg-green-500"},n=s=>{if(!s)return!1;const i=new Date(s),d=new Date,o=Math.ceil((i.getTime()-d.getTime())/(1e3*60*60*24));return o>0&&o<=30},x=s=>s?new Date(s)<new Date:!1;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"hidden md:block overflow-x-auto border border-gray-200 rounded-lg shadow-sm",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gradient-to-r from-gray-50 to-gray-100 text-gray-700 font-semibold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left border-b",children:"#"}),e.jsx("th",{className:"p-3 text-left border-b",children:"Unit"}),e.jsx("th",{className:"p-3 text-left border-b",children:"Price"}),e.jsx("th",{className:"p-3 text-left border-b",children:"Offer"}),e.jsx("th",{className:"p-3 text-left border-b",children:"Stock"}),e.jsx("th",{className:"p-3 text-left border-b",children:"Expiry"}),e.jsx("th",{className:"p-3 text-right border-b",children:"Actions"})]})}),e.jsx("tbody",{children:r.map((s,i)=>{const d=f(s.stock??0),o=s.offerPrice&&s.offerPrice<s.price,h=o?s.price-(s.offerPrice||0):0,u=o?Math.round(h/s.price*100):0,g=n(s.shelfLife?.expiryDate),a=x(s.shelfLife?.expiryDate);return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-blue-50 transition-colors duration-150",children:[e.jsx("td",{className:"p-3 font-medium text-gray-700",children:i+1}),e.jsx("td",{className:"p-3",children:e.jsxs("span",{className:"font-semibold text-gray-900",children:[s.unitValue," ",s.unitType]})}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"font-bold text-gray-900",children:["â‚¹",s.price]}),s?.discount&&s?.discount>0&&e.jsxs("span",{className:"text-xs text-gray-500",children:[s.discount,"% disc"]})]})}),e.jsx("td",{className:"p-3",children:o?e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{className:"font-bold text-green-600",children:["â‚¹",s.offerPrice]}),e.jsxs("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full inline-block w-fit",children:["Save ",u,"%"]})]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"p-3",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${d.color} flex items-center gap-1.5`,children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${d.dotColor}`}),s.stock??0]})})}),e.jsx("td",{className:"p-3",children:s.shelfLife?.expiryDate?e.jsxs("div",{className:"flex items-center gap-1",children:[a&&e.jsx(D,{className:"text-red-500"}),g&&!a&&e.jsx(D,{className:"text-orange-500"}),e.jsx("span",{className:a?"text-red-600 font-medium":g?"text-orange-600":"text-gray-700",children:new Date(s.shelfLife.expiryDate).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})})]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:()=>b(s,i),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",title:"Edit variant",children:e.jsx(M,{})}),e.jsx("button",{type:"button",onClick:()=>y(i),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",title:"Delete variant",children:e.jsx(V,{})})]})})]},i)})})]})}),e.jsx("div",{className:"md:hidden space-y-3",children:r.map((s,i)=>{const d=f(s.stock??0),o=s.offerPrice&&s.offerPrice<s.price,h=o?s.price-(s.offerPrice||0):0,u=o?Math.round(h/s.price*100):0,g=n(s.shelfLife?.expiryDate),a=x(s.shelfLife?.expiryDate);return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 bg-blue-100 text-blue-700 rounded-full flex items-center justify-center text-xs font-bold",children:i+1}),e.jsxs("span",{className:"font-bold text-gray-900 text-lg",children:[s.unitValue," ",s.unitType]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>b(s,i),className:"p-2 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors",children:e.jsx(M,{})}),e.jsx("button",{type:"button",onClick:()=>y(i),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg transition-colors",children:e.jsx(V,{})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Regular Price"}),e.jsxs("p",{className:"font-bold text-gray-900",children:["â‚¹",s.price]})]}),o&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Offer Price"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"font-bold text-green-600",children:["â‚¹",s.offerPrice]}),e.jsxs("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full",children:["-",u,"%"]})]})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Stock Status"}),e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-semibold ${d.color}`,children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${d.dotColor}`}),s.stock??0," units - ",d.label]})]}),s.shelfLife?.expiryDate&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Expiry Date"}),e.jsxs("div",{className:"flex items-center gap-1",children:[a&&e.jsx(D,{className:"text-red-500"}),g&&!a&&e.jsx(D,{className:"text-orange-500"}),e.jsx("span",{className:a?"text-red-600 font-medium":g?"text-orange-600 font-medium":"text-gray-700",children:new Date(s.shelfLife.expiryDate).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}),a&&e.jsx("span",{className:"text-xs text-red-600 ml-2",children:"(Expired)"}),g&&!a&&e.jsx("span",{className:"text-xs text-orange-600 ml-2",children:"(Expiring Soon)"})]})]})]},i)})})]})},ce=({initialData:r,onSubmit:b,onCancel:y,categories:f})=>{const{fetchSubCategoriesByCategory:n,subCategories:x}=Y(),[s,i]=m.useState({name:"",description:"",category:"",subcategory:"",published:!0,isLoose:!1}),[d,o]=m.useState({unitType:"kg",pricePerUnit:0,availableQty:0,minQtyAllowed:100,stepQty:50}),[h,u]=m.useState([]),[g,a]=m.useState(null),[c,j]=m.useState([]),[N,A]=m.useState([]),[w,L]=m.useState(!1),[P,F]=m.useState(!1),[E,k]=m.useState(null),[C,S]=m.useState(null);m.useEffect(()=>{r&&(i({name:r.name,description:r.description||"",category:typeof r.category=="string"?r.category:r.category?._id||"",subcategory:typeof r.subcategory=="string"?r.subcategory:r.subcategory?._id||"",published:r.published??!0,isLoose:r.isLoose??!1}),o(r.looseConfig||{unitType:"kg",pricePerUnit:0,availableQty:0,minQtyAllowed:100,stepQty:50}),u(r.variants||[]),j(r.images||[]))},[r]),m.useEffect(()=>{s.category&&n(s.category)},[s.category]);const B=t=>a(t),U=t=>{A(l=>[...l,t]),j(l=>l.filter(p=>p!==t))},_=t=>{if(C!==null){const l=[...h];l[C]=t,u(l)}else u([...h,t]);S(null),k(null)},I=async t=>{t.preventDefault(),L(!0);const l=new FormData;l.append("name",s.name),X(l,"description",s.description),l.append("category",s.category),l.append("subcategory",s.subcategory),l.append("published",String(s.published)),l.append("isLoose",String(s.isLoose)),s.isLoose?l.append("looseConfig",JSON.stringify(d)):l.append("variants",JSON.stringify(h)),g&&Array.from(g).forEach(p=>l.append("images",p)),N.length>0&&l.append("deletedImages",JSON.stringify(N));try{await b(l)}finally{L(!1)}};return e.jsxs("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-0 md:p-4",children:[e.jsxs("form",{onSubmit:I,className:"bg-white w-full h-full md:h-auto md:max-h-[95vh] md:max-w-5xl rounded-none md:rounded-xl shadow-2xl flex flex-col overflow-hidden",children:[e.jsxs("header",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex justify-between items-center z-10 shadow-sm",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg flex items-center justify-center",children:e.jsx(v,{className:"text-xl text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:r?"Edit Product":"Add New Product"}),e.jsx("p",{className:"text-gray-500 text-sm",children:r?"Update product details":"Create a new product"})]})]}),e.jsx("button",{type:"button",onClick:y,className:"w-8 h-8 hover:bg-gray-100 rounded-lg flex items-center justify-center transition-colors text-gray-600 hover:text-gray-900",children:"âœ•"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-6 space-y-6 bg-gray-50",children:[e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(z,{className:"text-blue-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Basic Information"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Product Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{required:!0,value:s.name,onChange:t=>i({...s,name:t.target.value}),placeholder:"e.g., Organic Basmati Rice",className:"w-full border border-gray-300 rounded-lg px-4 py-2.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{required:!0,value:s.category,onChange:t=>i({...s,category:t.target.value}),className:"w-full border border-gray-300 rounded-lg px-4 py-2.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"",children:"Select Category"}),f.map(t=>e.jsx("option",{value:t._id,children:t.name},t._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subcategory"}),e.jsxs("select",{value:s.subcategory,onChange:t=>i({...s,subcategory:t.target.value}),className:"w-full border border-gray-300 rounded-lg px-4 py-2.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",disabled:!s.category,children:[e.jsx("option",{value:"",children:"Select Subcategory"}),x.map(t=>e.jsx("option",{value:t._id,children:t.name},t._id))]}),!s.category&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select a category first"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Publication Status"}),e.jsxs("select",{value:s.published?"true":"false",onChange:t=>i({...s,published:t.target.value==="true"}),className:"w-full border border-gray-300 rounded-lg px-4 py-2.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",children:[e.jsx("option",{value:"true",children:"âœ… Published (Visible to customers)"}),e.jsx("option",{value:"false",children:"ðŸ“¦ Unpublished (Hidden)"})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:s.description,onChange:t=>i({...s,description:t.target.value}),placeholder:"Describe your product features, benefits, and details...",className:"w-full border border-gray-300 rounded-lg px-4 py-2.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",rows:3})]})]})]}),e.jsx("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsx(R,{className:"text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Loose Product"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Sold by weight/volume (e.g., rice, flour)"})]})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:s.isLoose,onChange:t=>i({...s,isLoose:t.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-14 h-7 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-blue-600"})]})]})}),e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(K,{className:"text-green-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Product Images"}),e.jsx("span",{className:"text-xs text-gray-500",children:"(Max 3 images)"})]}),e.jsx(le,{maxCount:3,defaultImages:c,onChange:B}),c.length>0&&e.jsx("div",{className:"mt-4 flex gap-3 flex-wrap",children:c.map((t,l)=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:t,alt:"existing",className:"w-24 h-24 object-cover border-2 border-gray-200 rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>U(t),className:"absolute -top-2 -right-2 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 text-xs flex items-center justify-center shadow-lg opacity-0 group-hover:opacity-100 transition-opacity",children:"âœ•"})]},l))})]}),s.isLoose?e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(R,{className:"text-purple-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Loose Product Configuration"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit Type"}),e.jsxs("select",{value:d.unitType,onChange:t=>o({...d,unitType:t.target.value}),className:"w-full border border-gray-300 rounded-lg px-4 py-2.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"kg",children:"Kilogram (kg)"}),e.jsx("option",{value:"gm",children:"Gram (gm)"}),e.jsx("option",{value:"ltr",children:"Litre (ltr)"}),e.jsx("option",{value:"ml",children:"Millilitre (ml)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price per Unit (â‚¹)"}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:d.pricePerUnit,onChange:t=>o({...d,pricePerUnit:Number(t.target.value)}),className:"w-full border border-gray-300 rounded-lg px-4 py-2.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"â‚¹ per unit"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Available Quantity"}),e.jsx("input",{type:"number",min:"0",value:d.availableQty,onChange:t=>o({...d,availableQty:Number(t.target.value)}),className:"w-full border border-gray-300 rounded-lg px-4 py-2.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Total stock"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Quantity Allowed"}),e.jsx("input",{type:"number",min:"0",value:d.minQtyAllowed,onChange:t=>o({...d,minQtyAllowed:Number(t.target.value)}),className:"w-full border border-gray-300 rounded-lg px-4 py-2.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum order quantity"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Step Quantity"}),e.jsx("input",{type:"number",min:"0",value:d.stepQty,onChange:t=>o({...d,stepQty:Number(t.target.value)}),className:"w-full border border-gray-300 rounded-lg px-4 py-2.5 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Increment step for quantity"})]})]})]}):e.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"text-orange-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Product Variants"}),e.jsxs("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",children:[h.length," variant",h.length!==1?"s":""]})]}),e.jsxs("button",{type:"button",onClick:()=>{k(null),S(null),F(!0)},className:"flex items-center gap-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors shadow-sm",children:[e.jsx(T,{})," Add Variant"]})]}),e.jsx(de,{variants:h,onEdit:(t,l)=>{k(t),S(l),F(!0)},onDelete:t=>u(h.filter((l,p)=>p!==t))})]})]}),e.jsxs("footer",{className:"sticky bottom-0 bg-white border-t px-6 py-4 flex justify-end gap-3 shadow-lg",children:[e.jsx("button",{type:"button",onClick:y,className:"px-6 py-2.5 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:w||!s.name||!s.category,className:"px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-sm flex items-center gap-2",children:w?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(v,{}),r?"Update Product":"Create Product"]})})]})]}),e.jsx(ie,{open:P,onClose:()=>F(!1),onSave:_,initialData:E})]})},xe=({product:r,onEdit:b,onDelete:y})=>{const[f,n]=m.useState(!1),x=r.variants?.[0],s=x?.offerPrice&&x.offerPrice<x.price,i=s?x.offerPrice:x?.price,d=s?x.price:null,o=r.variants?.reduce((c,j)=>c+(j.stock??0),0)??0,u=o===0?{label:"Out of Stock",color:"bg-red-100 text-red-700",dotColor:"bg-red-500"}:o<=10?{label:"Low Stock",color:"bg-yellow-100 text-yellow-700",dotColor:"bg-yellow-500"}:{label:"In Stock",color:"bg-green-100 text-green-700",dotColor:"bg-green-500"},g=typeof r.category=="string"?r.category:r.category?.name||"Uncategorized",a=r.images?.[0]||"https://via.placeholder.com/300x300?text=No+Image";return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-lg transition-all duration-300 overflow-hidden group relative",onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[e.jsxs("div",{className:"relative h-48 bg-gray-100 overflow-hidden",children:[e.jsx("img",{src:a,alt:r.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}),e.jsxs("div",{className:`absolute top-3 right-3 px-3 py-1 rounded-full text-xs font-semibold ${u.color} backdrop-blur-sm flex items-center gap-1.5`,children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${u.dotColor} animate-pulse`}),u.label]}),s&&e.jsx("div",{className:"absolute top-3 left-3 px-3 py-1 rounded-full text-xs font-bold bg-red-600 text-white backdrop-blur-sm",children:"SALE"}),e.jsxs("div",{className:`absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center gap-3 transition-opacity duration-300 ${f?"opacity-100":"opacity-0 pointer-events-none"}`,children:[e.jsx("button",{onClick:()=>b(r),className:"w-10 h-10 bg-white hover:bg-blue-600 text-blue-600 hover:text-white rounded-full flex items-center justify-center transition-all shadow-lg transform hover:scale-110",title:"Edit Product",children:e.jsx(M,{})}),e.jsx("button",{onClick:()=>y(r._id),className:"w-10 h-10 bg-white hover:bg-red-600 text-red-600 hover:text-white rounded-full flex items-center justify-center transition-all shadow-lg transform hover:scale-110",title:"Delete Product",children:e.jsx(V,{})})]})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-50 text-blue-700 rounded-md text-xs font-medium",children:[e.jsx(v,{className:"text-xs"}),g]}),r.variants&&r.variants.length>1&&e.jsxs("span",{className:"text-xs text-gray-500",children:[r.variants.length," variants"]})]}),e.jsx("h3",{className:"font-bold text-gray-900 text-base mb-1 line-clamp-2 min-h-[2.5rem]",children:r.name}),r.description&&e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-3 min-h-[2.5rem]",children:r.description}),e.jsxs("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-gray-100",children:[e.jsxs("div",{children:[i!==void 0&&e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsxs("span",{className:"text-2xl font-bold text-green-600",children:["â‚¹",i]}),d&&e.jsxs("span",{className:"text-sm text-gray-400 line-through",children:["â‚¹",d]})]}),x&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[x.unitValue," ",x.unitType]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm font-semibold text-gray-700",children:["Stock: ",o]}),x?.shelfLife?.expiryDate&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Exp: ",new Date(x.shelfLife.expiryDate).toLocaleDateString("en-IN",{day:"2-digit",month:"short"})]})]})]}),r.variants&&r.variants.length>1&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Available Variants:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[r.variants.slice(0,3).map((c,j)=>e.jsxs("span",{className:"inline-block px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs",children:[c.unitValue,c.unitType]},j)),r.variants.length>3&&e.jsxs("span",{className:"inline-block px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs",children:["+",r.variants.length-3," more"]})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4 md:hidden",children:[e.jsxs("button",{onClick:()=>b(r),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-lg font-medium transition-colors text-sm",children:[e.jsx(M,{}),"Edit"]}),e.jsxs("button",{onClick:()=>y(r._id),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-red-50 hover:bg-red-100 text-red-700 rounded-lg font-medium transition-colors text-sm",children:[e.jsx(V,{}),"Delete"]})]})]})]})},me=()=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden animate-pulse border border-gray-100",children:[e.jsx("div",{className:"h-48 bg-gray-200"}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),e.jsxs("div",{className:"flex justify-between items-center pt-2",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-20"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded w-8"})]})]})]});function ue(r,b=400){const[y,f]=m.useState(r);return m.useEffect(()=>{const n=setTimeout(()=>f(r),b);return()=>clearTimeout(n)},[r,b]),y}const he=()=>{const{loadingConfig:r,products:b,fetchProducts:y,createProduct:f,updateProduct:n,deleteProduct:x}=ee(),{categories:s,fetchCategories:i}=se(),[d,o]=m.useState(!1),[h,u]=m.useState(null),[g,a]=m.useState(""),[c,j]=m.useState(""),[N,A]=m.useState(""),[w,L]=m.useState("name"),[P,F]=m.useState(!1),E=ue(g,400);m.useEffect(()=>{Promise.all([y(),i()]).catch(console.error)},[]);const k=m.useMemo(()=>{let t=[...b];return E&&(t=t.filter(l=>l.name.toLowerCase().includes(E.toLowerCase()))),c&&(t=t.filter(l=>(typeof l.category=="string"?l.category:l.category?._id)===c)),N==="in-stock"?t=t.filter(l=>l.variants?.some(p=>(p.stock??0)>10)):N==="low-stock"?t=t.filter(l=>l.variants?.some(p=>(p.stock??0)>0&&(p.stock??0)<=10)):N==="out-of-stock"&&(t=t.filter(l=>l.variants?.every(p=>(p.stock??0)===0))),w==="name"?t.sort((l,p)=>l.name.localeCompare(p.name)):w==="price-low"?t.sort((l,p)=>{const O=l.variants?.[0]?.price??0,Q=p.variants?.[0]?.price??0;return O-Q}):w==="price-high"&&t.sort((l,p)=>{const O=l.variants?.[0]?.price??0;return(p.variants?.[0]?.price??0)-O}),t},[b,E,c,N,w]),C=[c,N].filter(Boolean).length,S=()=>{u(null),o(!0)},B=t=>{u(t),o(!0)},U=async t=>{try{h?await n(h._id,t):await f(t),await y(),o(!1),u(null)}catch(l){alert(l.response?.data?.message||l.message)}},_=async t=>{window.confirm("Are you sure you want to delete this product?")&&(await x(t),await y())},I=()=>{a(""),j(""),A(""),L("name")};return e.jsxs("div",{className:"pb-24",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:"Products"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage your product inventory"})]}),e.jsxs("button",{onClick:S,className:"w-full sm:w-auto flex items-center justify-center gap-2 px-5 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-lg font-medium transition-all shadow-sm hover:shadow-md",children:[e.jsx(T,{})," Add Product"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4 mb-6",children:[e.jsxs("div",{className:"md:col-span-3 bg-white rounded-xl p-4 shadow-sm border border-gray-100 flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-lg flex items-center justify-center",children:e.jsx(v,{className:"text-indigo-600 text-xl"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:k.length}),e.jsx("p",{className:"text-sm text-gray-500",children:"Total Products"})]})]}),e.jsxs("div",{className:"md:col-span-6 relative",children:[e.jsx(te,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search products by name...",value:g,onChange:t=>a(t.target.value),className:"w-full pl-11 pr-10 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-transparent bg-white shadow-sm"}),g&&e.jsx("button",{onClick:()=>a(""),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(q,{})})]}),e.jsx("div",{className:"md:col-span-3",children:e.jsxs("button",{onClick:()=>F(!P),className:`w-full h-full flex items-center justify-center gap-2 px-4 py-3 rounded-xl font-medium transition-all border ${P||C>0?"bg-indigo-50 border-indigo-200 text-indigo-700":"bg-white border-gray-200 text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(re,{}),e.jsx("span",{children:"Filters"}),C>0&&e.jsx("span",{className:"bg-indigo-600 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:C})]})})]}),P&&e.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100 mb-6 animate-fade-in-down",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),e.jsxs("select",{value:c,onChange:t=>j(t.target.value),className:"w-full border border-gray-200 rounded-lg px-3 py-2.5 focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Categories"}),s.map(t=>e.jsx("option",{value:t._id,children:t.name},t._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stock Status"}),e.jsxs("select",{value:N,onChange:t=>A(t.target.value),className:"w-full border border-gray-200 rounded-lg px-3 py-2.5 focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Stock Levels"}),e.jsx("option",{value:"in-stock",children:"In Stock (>10)"}),e.jsx("option",{value:"low-stock",children:"Low Stock (1-10)"}),e.jsx("option",{value:"out-of-stock",children:"Out of Stock"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2 flex items-center gap-2",children:[e.jsx(ae,{})," Sort By"]}),e.jsxs("select",{value:w,onChange:t=>L(t.target.value),className:"w-full border border-gray-200 rounded-lg px-3 py-2.5 focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[e.jsx("option",{value:"name",children:"Name (A-Z)"}),e.jsx("option",{value:"price-low",children:"Price (Low to High)"}),e.jsx("option",{value:"price-high",children:"Price (High to Low)"})]})]})]}),e.jsx("div",{className:"flex justify-end mt-4 pt-4 border-t border-gray-100",children:e.jsxs("button",{onClick:I,className:"text-sm text-red-600 hover:text-red-700 font-medium flex items-center gap-1",children:[e.jsx(q,{})," Clear Filters"]})})]}),!P&&e.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide mb-6",children:[e.jsx("button",{onClick:()=>j(""),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all ${c===""?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-md":"bg-white border border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:"All Categories"}),s.map(t=>e.jsx("button",{onClick:()=>j(t._id),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all ${c===t._id?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-md":"bg-white border border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:t.name},t._id))]})]}),e.jsxs("div",{children:[r.loading&&e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5",children:[1,2,3,4,5,6,7,8].map(t=>e.jsx(me,{},t))}),!r.loading&&k.length===0&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center border-2 border-dashed border-gray-200",children:[e.jsx("div",{className:"w-20 h-20 bg-gray-50 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(v,{className:"text-4xl text-gray-300"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:b.length===0?"No products yet":"No products found"}),e.jsx("p",{className:"text-gray-500 mb-6 max-w-md mx-auto",children:b.length===0?"Get started by adding your first product to your inventory.":"We couldn't find any products matching your filters. Try adjusting them."}),(C>0||g)&&b.length>0?e.jsx("button",{onClick:I,className:"px-6 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-medium transition-colors shadow-sm",children:"Clear Filters"}):e.jsxs("button",{onClick:S,className:"px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white rounded-lg font-medium transition-colors shadow-sm flex items-center gap-2 mx-auto",children:[e.jsx(T,{}),"Add Your First Product"]})]}),!r.loading&&k.length>0&&e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5",children:k.map(t=>e.jsx(xe,{product:t,onEdit:B,onDelete:_},t._id))})]}),e.jsx("button",{onClick:S,className:"md:hidden fixed bottom-6 right-6 w-14 h-14 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-full shadow-lg hover:shadow-xl transition-all flex items-center justify-center z-20 active:scale-95",title:"Add Product",children:e.jsx(T,{className:"text-xl"})}),d&&e.jsx(ce,{initialData:h,onSubmit:U,onCancel:()=>{o(!1),u(null)},categories:s})]})};export{he as default};
