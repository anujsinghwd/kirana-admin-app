import{r as c,j as e,a as p,z as N,F as h,b as u,c as g,d as x,e as y,f as m,g as v,h as w,i as k,L as S,k as b,l as F}from"./index-vANiC36P.js";const j=c.createContext(void 0),D=()=>{const s=c.useContext(j);if(!s)throw new Error("useDashboard must be used within DashboardProvider");return s},C=({children:s})=>{const[a,d]=c.useState(null),[t,r]=c.useState({loading:!1,text:""}),n=async(l=7,o={})=>{r({loading:!0,text:"Loading dashboard..."});try{const i=await p.get("/dashboard/stats",{params:{period:l,...o}});d(i.data.data??null)}catch(i){console.error("Dashboard fetch error",i),N.error("Failed to load dashboard stats"),d(null)}finally{r({loading:!1,text:""})}};return e.jsx(j.Provider,{value:{stats:a,loadingConfig:t,fetchStats:n},children:s})},L=({data:s})=>{if(!s||s.length===0)return e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-3",children:e.jsx(h,{className:"text-gray-400 text-2xl"})}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"No Data Available"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Revenue data will appear here"})]});const a=s.map(r=>Number(r.revenue)||0),d=Math.max(...a,1);return a.every(r=>r===0)?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-3",children:e.jsx(h,{className:"text-blue-600 text-2xl"})}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"No Revenue Yet"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Revenue will be tracked here"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"relative bg-gradient-to-b from-blue-50 to-transparent rounded-lg p-4 border border-blue-100",children:e.jsx("div",{className:"flex items-end justify-between gap-1 h-32",children:s.map((r,n)=>{const l=Number(r.revenue)||0,o=Math.max(l/d*100,2),i=l===d;return e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1 group cursor-pointer",children:[e.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity absolute -top-12 bg-gray-900 text-white text-xs px-2 py-1 rounded shadow-lg whitespace-nowrap pointer-events-none",children:["â‚¹",l.toFixed(2)]}),e.jsx("div",{className:"w-full flex items-end justify-center",style:{height:"100%"},children:e.jsx("div",{role:"img","aria-label":`${r._id}: â‚¹${l.toFixed(2)}`,title:`${r._id}: â‚¹${l.toFixed(2)}`,className:`w-full rounded-t-lg transition-all duration-300 group-hover:opacity-80 ${i?"shadow-lg":""}`,style:{height:`${o}%`,background:i?"linear-gradient(180deg, #3b82f6, #6366f1)":"linear-gradient(180deg, #60a5fa, #818cf8)",minHeight:"4px"}})})]},r._id??n)})})}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-3 border border-blue-100",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Total"}),e.jsxs("p",{className:"text-sm font-bold text-gray-900",children:["â‚¹",a.reduce((r,n)=>r+n,0).toFixed(2)]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg p-3 border border-green-100",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Average"}),e.jsxs("p",{className:"text-sm font-bold text-gray-900",children:["â‚¹",(a.reduce((r,n)=>r+n,0)/a.length).toFixed(2)]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-lg p-3 border border-purple-100",children:[e.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Peak"}),e.jsxs("p",{className:"text-sm font-bold text-gray-900",children:["â‚¹",d.toFixed(2)]})]})]})]})},P=({products:s})=>{if(!s||s.length===0)return e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-3",children:e.jsx(u,{className:"text-gray-400 text-2xl"})}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"No Sales Yet"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Top products will appear here"})]});const a=t=>t===0?"from-yellow-400 to-yellow-600":t===1?"from-gray-300 to-gray-500":t===2?"from-orange-400 to-orange-600":"from-blue-100 to-indigo-100",d=t=>t<3?e.jsx(u,{className:"text-white text-xs"}):e.jsx("span",{className:"text-xs font-bold text-indigo-600",children:t+1});return e.jsx("div",{className:"space-y-3",children:s.map((t,r)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gradient-to-r from-blue-50/50 to-indigo-50/50 border border-blue-100 rounded-lg hover:shadow-sm transition-all",children:[e.jsx("div",{className:`w-8 h-8 rounded-lg bg-gradient-to-br ${a(r)} flex items-center justify-center flex-shrink-0 shadow-sm`,children:d(r)}),e.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[t.image?e.jsx("img",{src:t.image,alt:t.name,className:"w-12 h-12 rounded-lg object-cover flex-shrink-0 border-2 border-white shadow-sm"}):e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gray-200 flex items-center justify-center flex-shrink-0",children:e.jsx(g,{className:"text-gray-400"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900 truncate",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:["Sold: ",t.quantitySold]}),e.jsx("span",{className:"text-gray-300",children:"â€¢"}),e.jsxs("span",{className:"text-xs font-semibold text-green-600 flex items-center gap-1",children:[e.jsx(x,{className:"text-[8px]"}),"â‚¹",t.revenue.toFixed(0)]})]})]})]})]},t._id))})},T=({items:s})=>!s||s.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-3",children:e.jsx(g,{className:"text-green-600 text-2xl"})}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"All Stocked Up!"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"No low stock items at the moment"})]}):e.jsx("div",{className:"space-y-3",children:s.map(a=>e.jsxs("div",{className:"flex items-center justify-between gap-3 p-3 bg-red-50 border border-red-100 rounded-lg hover:bg-red-100 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[a.images?.[0]?e.jsx("img",{src:a.images[0],alt:a.name,className:"w-12 h-12 rounded-lg object-cover flex-shrink-0 border-2 border-white shadow-sm"}):e.jsx("div",{className:"w-12 h-12 rounded-lg bg-gray-200 flex items-center justify-center flex-shrink-0",children:e.jsx(g,{className:"text-gray-400"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-900 truncate",children:a.name}),e.jsx("div",{className:"flex items-center gap-1 mt-1",children:e.jsxs("span",{className:"text-xs text-red-600 font-medium",children:["Stock: ",a.totalStock]})})]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 bg-red-600 text-white px-3 py-1.5 rounded-lg text-xs font-semibold flex-shrink-0",children:[e.jsx(y,{}),e.jsx("span",{children:"Low"})]})]},a._id))}),R=({orders:s})=>{if(!s||s.length===0)return e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-3",children:e.jsx(m,{className:"text-gray-400 text-2xl"})}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:"No Recent Orders"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Orders will appear here as they come in"})]});const a=t=>{const r=t.toLowerCase();return r.includes("delivered")?"bg-green-100 text-green-700 border-green-200":r.includes("cancelled")||r.includes("rejected")?"bg-red-100 text-red-700 border-red-200":r.includes("confirmed")||r.includes("preparing")?"bg-blue-100 text-blue-700 border-blue-200":r.includes("out for delivery")||r.includes("ready")?"bg-purple-100 text-purple-700 border-purple-200":"bg-yellow-100 text-yellow-700 border-yellow-200"},d=t=>{const r=new Date(t),l=new Date().getTime()-r.getTime(),o=Math.floor(l/6e4),i=Math.floor(o/60),f=Math.floor(i/24);return o<60?`${o}m ago`:i<24?`${i}h ago`:f<7?`${f}d ago`:r.toLocaleDateString()};return e.jsx("div",{className:"space-y-3",children:s.map(t=>e.jsxs("div",{className:"bg-gradient-to-r from-white to-gray-50 border border-gray-200 rounded-lg p-4 hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(m,{className:"text-indigo-600"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-bold text-gray-900",children:["#",t.orderId]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-500 mt-1",children:[e.jsx(v,{className:"text-[10px]"}),e.jsx("span",{children:d(t.createdAt)})]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-lg font-bold text-gray-900",children:["â‚¹",t.totalAmt.toFixed(2)]})})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("span",{className:`px-3 py-1.5 rounded-lg text-xs font-semibold border ${a(t.order_status)}`,children:t.order_status})})]},t._id))})},M=()=>{const{stats:s,loadingConfig:a,fetchStats:d}=D(),[t,r]=c.useState(7);c.useEffect(()=>{d(t)},[t]);const n=()=>{const l=new Date().getHours();return l<12?"Good Morning":l<18?"Good Afternoon":"Good Evening"};return e.jsxs("section",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50/30 p-4 md:p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:[n()," ðŸ‘‹"]}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Here's what's happening with your store today"})]}),e.jsxs("button",{onClick:()=>d(t),className:"flex items-center justify-center gap-2 px-4 py-2.5 bg-white hover:bg-gray-50 border border-gray-200 rounded-lg shadow-sm transition-all text-sm font-medium text-gray-700",title:"Refresh",children:[e.jsx(w,{className:"text-indigo-600"}),e.jsx("span",{children:"Refresh Data"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 overflow-x-auto pb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 flex-shrink-0",children:[e.jsx(k,{className:"text-indigo-600"}),e.jsx("span",{className:"font-medium",children:"Period:"})]}),e.jsx("div",{className:"flex gap-2",children:[{days:7,label:"Last 7 days"},{days:30,label:"Last 30 days"},{days:90,label:"Last 90 days"}].map(l=>e.jsx("button",{onClick:()=>r(l.days),className:`whitespace-nowrap px-4 py-2 rounded-lg text-sm font-medium transition-all ${t===l.days?"bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-md":"bg-white text-gray-700 border border-gray-200 hover:border-indigo-300 hover:bg-indigo-50"}`,children:l.label},l.days))})]})]}),a.loading&&e.jsx(S,{size:40,color:"fill-blue-500",fullscreen:!0,text:a.text}),!s&&!a.loading&&e.jsxs("div",{className:"bg-red-50 border border-red-200 p-4 rounded-xl text-sm text-red-700 flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(b,{className:"text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Unable to load dashboard data"}),e.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Please try refreshing the page"})]})]}),s&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-lg flex items-center justify-center",children:e.jsx(g,{className:"text-indigo-600 text-xl"})}),e.jsxs("div",{className:"flex items-center gap-1 text-xs font-medium text-green-600",children:[e.jsx(x,{className:"text-[10px]"}),e.jsx("span",{children:"12%"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Total Products"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.totals.totalProducts})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-100 to-pink-100 rounded-lg flex items-center justify-center",children:e.jsx(F,{className:"text-purple-600 text-xl"})}),e.jsxs("div",{className:"flex items-center gap-1 text-xs font-medium text-green-600",children:[e.jsx(x,{className:"text-[10px]"}),e.jsx("span",{children:"8%"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Categories"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.totals.totalCategories})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-green-100 to-emerald-100 rounded-lg flex items-center justify-center",children:e.jsx(m,{className:"text-green-600 text-xl"})}),e.jsxs("div",{className:"flex items-center gap-1 text-xs font-medium text-green-600",children:[e.jsx(x,{className:"text-[10px]"}),e.jsx("span",{children:"24%"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Total Orders"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.totals.totalOrders})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-100 to-amber-100 rounded-lg flex items-center justify-center",children:e.jsx(h,{className:"text-orange-600 text-xl"})}),e.jsxs("div",{className:"flex items-center gap-1 text-xs font-medium text-green-600",children:[e.jsx(x,{className:"text-[10px]"}),e.jsx("span",{children:"18%"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Total Revenue"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["â‚¹",s.revenueSummary.totalRevenue.toFixed(2)]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-lg flex items-center justify-center",children:e.jsx(m,{className:"text-indigo-600 text-sm"})}),e.jsx("h3",{className:"text-base font-bold text-gray-900",children:"Orders by Status"})]}),e.jsxs("span",{className:"text-xs font-medium text-gray-500 bg-gray-100 px-3 py-1 rounded-full",children:["Total: ",s.revenueSummary.count]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.ordersByStatus.map(l=>e.jsxs("div",{className:"flex items-center gap-2 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-100 rounded-lg px-4 py-2 text-sm hover:shadow-sm transition-shadow",children:[e.jsx("span",{className:"font-semibold text-gray-900",children:l.status}),e.jsx("span",{className:"text-gray-400",children:"Â·"}),e.jsx("span",{className:"font-bold text-indigo-600",children:l.count})]},l.status))})]}),e.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-green-100 to-emerald-100 rounded-lg flex items-center justify-center",children:e.jsx(h,{className:"text-green-600 text-sm"})}),e.jsx("h3",{className:"text-base font-bold text-gray-900",children:"Revenue Trend"})]}),e.jsxs("div",{className:"text-xs font-medium text-gray-500 bg-gray-100 px-3 py-1 rounded-full",children:["Last ",t," days"]})]}),e.jsx(L,{data:s.revenueByDay})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-100 to-pink-100 rounded-lg flex items-center justify-center",children:e.jsx(g,{className:"text-purple-600 text-sm"})}),e.jsx("h3",{className:"text-base font-bold text-gray-900",children:"Top Products"})]}),e.jsxs("span",{className:"text-xs font-medium text-gray-500 bg-gray-100 px-3 py-1 rounded-full",children:[s.topProducts.length," items"]})]}),e.jsx(P,{products:s.topProducts})]}),e.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-red-100 to-orange-100 rounded-lg flex items-center justify-center",children:e.jsx(b,{className:"text-red-600 text-sm"})}),e.jsx("h3",{className:"text-base font-bold text-gray-900",children:"Low Stock Alert"})]}),e.jsxs("span",{className:"text-xs font-medium text-red-600 bg-red-50 px-3 py-1 rounded-full",children:[s.lowStockProducts.length," items"]})]}),e.jsx(T,{items:s.lowStockProducts})]})]}),e.jsxs("div",{className:"bg-white rounded-xl p-5 shadow-sm border border-gray-100 mb-12",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-lg flex items-center justify-center",children:e.jsx(m,{className:"text-indigo-600 text-sm"})}),e.jsx("h3",{className:"text-base font-bold text-gray-900",children:"Recent Orders"})]}),e.jsx(R,{orders:s.recentOrders})]})]})]})};function A(){return e.jsx(C,{children:e.jsx(M,{})})}export{A as default};
